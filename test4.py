from copy import copy

from data import *
from tour_eval import *
from algorithms import *
import random



### test4 = run two opt a second time
# 120 and 135 are missing and added after random shuffling
# 120 and 135 are set for start and finish
points = getWayPoints()
pointids = list(points.keys())
tourGreat = [81, 80, 82, 84, 83, 33, 32, 31, 34, 35, 29, 85, 27, 28, 26, 25, 7, 30, 5, 4, 3, 2, 8, 6, 16, 24, 23, 10, 22, 11, 9, 136, 19, 1, 169, 170, 122, 121, 120, 118, 117, 119, 116, 108, 114, 91, 111, 110, 109, 171, 106, 142, 102, 104, 103, 107, 113, 112, 125, 124, 126, 105, 130, 129, 131, 141, 139, 140, 143, 144, 147, 146, 138, 137, 128, 145, 127, 132, 134, 149, 133, 221, 135, 217, 168, 12, 75, 148, 156, 18, 14, 20, 21, 13, 15, 17, 174, 40, 41, 42, 39, 36, 37, 38, 88, 89, 87, 59, 79, 77, 78, 76, 74, 71, 178, 72, 70, 73, 187, 188, 185, 183, 186, 189, 190, 184, 196, 195, 177, 176, 194, 175, 211, 215, 216, 94, 55, 172, 173, 191, 57, 68, 67, 69, 66, 64, 65, 62, 63, 60, 54, 53, 56, 52, 49, 44, 46, 206, 45, 90, 165, 164, 58, 163, 160, 162, 161, 158, 159, 157, 123, 155, 154, 153, 150, 101, 151, 152, 115, 43, 220, 192, 166, 167, 96, 48, 47, 50, 51, 97, 93, 95, 92, 99, 98, 218, 100, 198, 214, 213, 212, 210, 209, 222, 208, 219, 193, 179, 197, 182, 61, 181, 199, 180, 207, 204, 203, 200, 202, 201, 86, 205]
dist, dur = getDistAndDur(pointids)

tour = [81, 80, 82, 84, 83, 33, 32, 31, 34, 35, 29, 85, 27, 28, 26, 25, 7, 30, 5, 4, 3, 2, 8, 6, 16, 24, 23, 10, 22, 11, 9, 136, 19, 1, 169, 170, 122, 121, 120, 118, 117, 116, 119, 124, 126, 125, 112, 91, 114, 108, 111, 110, 109, 171, 106, 142, 102, 104, 103, 107, 113, 105, 130, 129, 131, 141, 139, 140, 143, 144, 147, 138, 137, 128, 145, 127, 132, 146, 134, 149, 133, 221, 135, 217, 168, 12, 75, 148, 123, 155, 154, 153, 150, 101, 151, 152, 115, 43, 158, 159, 162, 161, 220, 192, 166, 167, 90, 165, 164, 58, 160, 163, 45, 206, 46, 157, 156, 18, 14, 20, 21, 13, 15, 17, 174, 40, 41, 42, 39, 36, 37, 38, 88, 89, 87, 59, 79, 77, 78, 76, 74, 71, 178, 72, 70, 73, 188, 187, 186, 185, 183, 196, 184, 189, 190, 191, 57, 68, 67, 69, 66, 64, 65, 62, 63, 60, 54, 53, 52, 56, 44, 49, 50, 51, 97, 48, 47, 96, 93, 95, 92, 98, 99, 198, 214, 213, 212, 210, 209, 222, 208, 219, 193, 194, 175, 211, 215, 216, 100, 218, 94, 55, 172, 173, 176, 177, 195, 179, 197, 182, 61, 181, 199, 180, 204, 203, 200, 207, 201, 202, 86, 205]
print(total_distance(tour, dist))
print(total_duration(tour, dur))
drawNetworkFromTour(tour, "duration")
exit()

solutions = []
n = 1
last = 0
for i in range(n):
    tour = copy(tourGreat)

    number = (int(round(i / n, 3) * 100))
    if (number % 10 == 0) & (number != last):
        last = number
        print(f'{number} %')

    tour = algorithm("twoOpt", tourGreat, dist)
    print(tour)
    exit()
    start = tour[0]
    finish = tour[-1]

    solution = {
        'start': start,
        'finish': finish,
        'distance': total_distance(tour, dist),
        'duration': total_duration(tour, dur),
        'tour': tour
    }
    solutions.append(solution)


print(solutions)
#drawNetwork(solutions, "duration")
#tourmin = tourMin(solutions, "duration")
#drawNetworkFromTour(tourmin, "duration")